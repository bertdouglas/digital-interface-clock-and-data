--------------------------------------------------------------------------------
15 November 2013

Started work on abstraction of serial output frame timing.
Draw diagrams.  Make symbolic names for times.
Use a consistent layered approach.

Make spreadsheet to calculate dependent values.

--------------------------------------------------------------------------------
16 November 2013

Work on pin and signal assignments.
Draw diagrams.  Make tables of assignments.
A lot of consulting of device data sheet.

Code primitive app domain i/o functions
Code device configuration, including i/o and clocks.


--------------------------------------------------------------------------------
17 November 2013

Learn how to use mplab.  Create project.
Find where mplab include files are located.
/opt/microchip/xc8/...

Start compiling.
Figure out what standard include files are needed.
  xc8.h
  stdint.h
  stdbool.h
  stddef.h

Start compiling code written yesterday.
Lots of misunderstanding about how to use bitfields.
Resolve by reading the include file.  There is no xc8.h include file.
Instead it gets redirected to a file corresponding to the processor name.

Learned that LATA5 is not defined for this processor.
This is the mclr-/vpp pin.  It can be used by software for input,
but not for output.

So swap the DR and ACK signals.
Otherwise I have to use the pins reserved for external oscillator.
Rather not do that.

Now compiling, except for the references to serial frame time constants.
I am not happy defining these manually.  Would rather the process be
automated.  Can't really define them with C code, as some of the numbers
are large, but used only for documentation purposes.

Reorganize fles.
Put into git.
Suppress build results.
Add temp time constants to enable complete compile/build.
Now getting error on static variables.

    #define DATA_BUF_SIZE 78;
    uint8_t data_buf[DATA_BUF_SIZE];    // line 350
    uint8_t data_pos = 0;

get this error:

    CLEAN SUCCESSFUL (total time: 66ms)
    "/opt/microchip/xc8/v1.21/bin/xc8" --pass1  --chip=16F1826 -Q -G  --double=24 --float=24 --opt=default,+asm,+asmfile,-speed,+space,-debug --addrqual=ignore --mode=free -P -N255 --warn=0 --asmlist --summary=default,-psect,-class,+mem,-hex,-file --output=default,-inhx032 --runtime=default,+clear,+init,-keep,-no_startup,+osccal,-resetbits,-download,-stackcall,+clib --output=-mcof,+elf "--errformat=%f:%l: error: (%n) %s" "--warnformat=%f:%l: warning: (%n) %s" "--msgformat=%f:%l: advisory: (%n) %s"    -obuild/default/production/main.p1  main.c 
    main.c:350: warning: (983) storage class redeclared for "uint8_t"
    main.c:350: error: (1098) conflicting declarations for variable "uint8_t" (/opt/microchip/xc8/v1.21/include/stdint.h:43)
    (908) exit status = 1
    make: *** [build/default/production/main.p1] Error 1

    BUILD FAILED (exit value 2, total time: 2s)

Really puzzled.  Looked at include file.  Dont' see anything strange.
Perhaps something general about static variables.
Maybe it is too big, not enough memory.
Maybe special directive is needed.
Back to google and compiler handbook.

Found a partial declaration several lines before.
Now building ok.

Looks like getting full complete build.
Using about 5 percent of the code space.  Seems sufficient.  No worries.
Using about half the data space, but only have one large buffer.
Do both debug and production builds.  Not sure what is the difference.

Not much going on with stack space.  But most if not all of my functions
would be inlined, I hope.  Perhaps there is an inline keyword.

Check if response from hilario. No.







